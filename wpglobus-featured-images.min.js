var WPGlobusFeaturedImages;jQuery(document).ready(function(a){var t;t=WPGlobusFeaturedImages={start:!0,action:"",language:"",default_language:"",win:"",wp_native_action:!1,init:function(){try{a("#wpglobus-featured-images-tabs").tabs()}catch(e){t.start=!1}t.win=window.dialogArguments||opener||parent||top,"undefined"!=typeof t.win.WPGlobusCoreData&&(t.default_language=t.win.WPGlobusCoreData.default_language,a("#postimagediv").css({display:"none"}),a("#postimagediv-hide").prop("checked",!1),this.attachListener())},removeThumbnail:function(a,e,n){t.wp_native_action=!1;var u={};u.action="wpglobus-remove-post-thumbnail",u.language=e,u.attr={},u.attr.post_id=n,u.attr.thumbnail_id=-1,t.ajax(u)},setThumbnailHTML:function(t,e){a("#featured-images-tab-"+e).html(t)},setLanguage:function(){return a("#wpglobus-featured-images-tabs").data("featured-image-language")},ajax:function(e){a.ajax({type:"POST",url:WPGlobusFImages.ajaxurl,data:{action:WPGlobusFImages.process_ajax,order:e},dataType:"json"}).done(function(n){"ok"==n.result&&(n.order.language==WPGlobusCoreData.default_language&&a(WPGlobusFImages.thumbnailElementDefaultLanguage).val(n.order.attr.thumbnail_id),t.win.WPGlobusFeaturedImages.setThumbnailHTML(n.html,e.language))}).fail(function(a){}).always(function(a,t){})},attachListener:function(){a("#wpglobus_postimagediv").on("click",".wpglobus-set-post-thumbnail",function(e){e.preventDefault(),e.stopPropagation(),t.language=a(this).data("language"),wp.media.featuredImage.frame().open()}),a("#set-post-thumbnail").on("click",function(a){t.wp_native_action=!0}),a(document).ajaxSend(function(e,n,u){if("undefined"!=typeof u.data&&u.data.indexOf(WPGlobusFImages.getThumbnailAction)>=0&&!t.wp_native_action){if(u.data.indexOf("thumbnail_id=-1")>=0)return;n.abort();var i=u.data.split("&"),o={};a.each(i,function(a,t){var e=t.split("=");o[e[0]]={},o[e[0]]=e[1]});var l={};l.action="wpglobus-set-post-thumbnail",l.language=t.language,l.attr=o,a("a#wp-post-thumbnail-"+o.thumbnail_id).fadeOut(2e3),t.ajax(l)}})}},WPGlobusFeaturedImages.init()});